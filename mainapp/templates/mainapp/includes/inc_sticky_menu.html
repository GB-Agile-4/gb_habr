{% load static %}
{% load notifications_tags %}

<div class="main-menu-wrapper">
    <div class="container">
        <div class="main-menu-container">
            <nav class="navbar navbar-expand-lg navbar-light ">
                <button class="navbar-toggler" type="button" data-toggle="collapse"
                        data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                        aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse bg-light" id="navbarSupportedContent">
                    <ul class="navbar-nav mr-auto">
                        {% if request.resolver_match.kwargs.pk == 0 %}
                        <li class="nav-item active">
                            {% else %}
                        <li class="nav-item">
                            {% endif %}
                            <a href="{% url 'mainapp:articles' pk=0 %}"
                               class="main-menu-item main-menu-item-hover nav-link">Все потоки <span class="sr-only">(current)</span>
                            </a>
                        </li>
                        {% for category in article_categories %}
                        {% if request.resolver_match.kwargs.pk == category.pk %}
                        <li class="nav-item active">
                            {% else %}
                        <li class="nav-item">
                            {% endif %}
                            <a href="{% url 'mainapp:articles' pk=category.pk %}"
                               class="main-menu-item main-menu-item-hover nav-link">
                                {{category.name}}
                            </a>
                        </li>
                        {% endfor %}
                    </ul>
                </div>
            </nav>
            <nav class="main-user-bar">
                {% if user.is_authenticated %}
                <a href="{% url 'article:post' %}" class="main-user-item main-menu-item-hover nav-link">Написать</a>
                <a href="{% url 'user:account' user.username %}" class="main-user-item main-menu-item-hover nav-link">
                    {{ user.username }}
                </a>

                <a href="{% url 'user:notifications' %}" class="main-user-item main-menu-item-hover nav-link">
                    {%  notifications_unread as unread_count %}
                    {% if unread_count %}
                        <i style="color:#fa8e47" class="fa fa-bell fa-1x"></i>

                        {% live_notify_badge badge_class="badge" %}
                    {% else %}
                        <i style="color: #909090" class="fa fa-bell fa-1x"></i>
                    {% endif %}
                </a>
                <a href=" {% url 'auth:logout' %}" class="main-user-item main-menu-item-hover nav-link">Выйти</a>
                {% else %}
                <a href=" {% url 'auth:login' %}?next={{request.path}}"
                   class="main-user-item main-menu-item-hover">
                    Войти
                </a>
                <a href=" {% url 'auth:register' %}?next={{request.path}}"
                   class="main-user-item main-menu-item-hover">
                    Регистрация
                </a>
                {% endif %}
            </nav>
        </div>
    </div>
</div>
